#!/bin/bash
set -e

echo "Running pre-commit checks..."

# Format
echo "⚠ Formatting code..."
find src/ test/ -name "*.c" -o -name "*.h" | xargs clang-format -i
echo "✓ Format"

# Build
echo "⚠ Building project..."
make build
echo "✓ Build"

# Test
echo "⚠ Running tests..."
make test
echo "✓ Tests"

# All steps passed ok!
echo "✓ All steps passed ok! :)"
exit 0
